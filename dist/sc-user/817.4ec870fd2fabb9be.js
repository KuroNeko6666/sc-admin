"use strict";(self.webpackChunksc_user=self.webpackChunksc_user||[]).push([[817,564],{4817:(Z,c,l)=>{l.r(c),l.d(c,{DeviceEditComponent:()=>b});var e=l(6689),p=l(6814),o=l(95),a=l(6565),h=l(4974),g=l(9564),r=l(4670);function m(s,i){1&s&&(e.TgZ(0,"span",22),e._uU(1,"*model dibutuhkan!"),e.qZA())}function _(s,i){1&s&&(e.TgZ(0,"span",22),e._uU(1,"*alamat dibutuhkan!"),e.qZA())}function y(s,i){1&s&&(e.TgZ(0,"span",22),e._uU(1,"*kota dibutuhkan!"),e.qZA())}function v(s,i){1&s&&(e.TgZ(0,"span",22),e._uU(1,"*provinsi dibutuhkan!"),e.qZA())}function f(s,i){1&s&&e._UZ(0,"i",23)}let b=(()=>{class s{constructor(){this.router=(0,e.f3M)(r.F0),this.service=(0,e.f3M)(h.U8),this.notif=(0,e.f3M)(g.g),this.fb=(0,e.f3M)(o.qu),this.active=(0,e.f3M)(r.gz),this.rawStatus=a.q,this.status=a.q.initial,this.currentID="",this.form=this.fb.group({model:["",[o.kI.required]],address:["",[o.kI.required]],city:["",[o.kI.required]],province:["",[o.kI.required]]})}get model(){return this.form.get("model")}get address(){return this.form.get("address")}get city(){return this.form.get("city")}get province(){return this.form.get("province")}ngOnInit(){this.active.params.subscribe(n=>{this.find(n.id??"")})}back(){this.router.navigateByUrl("/device/list")}find(n){this.status=a.q.loading,this.service.find(n).subscribe({next:t=>{this.setForm(t.data),this.currentID=t.data.id,this.status=a.q.initial},error:t=>{console.log(t),this.status=a.q.error}})}submit(){if(this.form.invalid)return this.form.markAllAsTouched();this.status=a.q.loading,this.service.edit(this.formData,this.currentID).subscribe({next:n=>{this.notif.push({message:"Data berhasil ditambahkan",status:"success"}),this.status=a.q.initial,this.back()},error:n=>{this.notif.push({message:"Data gagal ditambahkan",status:"failure"}),console.log(n),this.status=a.q.error}})}setForm(n){this.model?.setValue(n.model),this.address?.setValue(n.address.address),this.city?.setValue(n.address.city),this.province?.setValue(n.address.province)}get formData(){let n=new FormData;return n.set("model",this.model?.value??""),n.append("address",this.address?.value??""),n.append("city",this.city?.value??""),n.append("province",this.province?.value??""),n.append("longitude",""),n.append("latitude",""),n}}return s.\u0275fac=function(n){return new(n||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-device-edit"]],standalone:!0,features:[e.jDz],decls:42,vars:11,consts:[[1,"bg-white","rounded-lg","shadow","p-8"],[1,"flex","flex-col","gap-5"],[1,"flex","flex-col"],[1,"text-2xl","font-black"],[1,""],[1,"flex","flex-col","w-full","gap-3",3,"formGroup","submit"],[1,"flex","flex-col","focus-within:scale-[102%]","transition-all","duration-200"],["for","model",1,"mb-1"],[1,"flex","flex-row","place-items-center","border-[1px]","md:border-[2px]","2xl:border-[3px]","transition-all","duration-200","rounded-lg",3,"ngClass"],["type","text","placeholder","Masukan model","formControlName","model","id","model",1,"w-full"],["class","px-3 mt-1 text-red-500 text-sm",4,"ngIf"],["for","address",1,"mb-1"],["type","text","placeholder","Masukan Alamat","formControlName","address","id","address",1,"w-full"],["for","city",1,"mb-1"],["type","text","placeholder","Masukan Kota","formControlName","city","id","city",1,"w-full"],["for","province",1,"mb-1"],["type","text","placeholder","Masukan Provinsi","formControlName","province","id","province",1,"w-full"],[1,"flex","flex-row","justify-end","gap-3"],["type","button",1,"px-4","py-2","mt-2","rounded-lg","bg-red-500","hover:bg-red-600","text-white","font-bold","hover:scale-[102%]","transition-all","duration-200",3,"click"],[1,"flex","flex-row","justify-center","place-items-center","gap-2"],["type","submit",1,"px-4","py-2","mt-2","rounded-lg","bg-blue-500","hover:bg-blue-600","text-white","font-bold","hover:scale-[102%]","transition-all","duration-200"],["class","fa-solid fa-spinner animate-spin",4,"ngIf"],[1,"px-3","mt-1","text-red-500","text-sm"],[1,"fa-solid","fa-spinner","animate-spin"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e._uU(4,"Tambah Perangkat"),e.qZA(),e.TgZ(5,"span",4),e._uU(6,"Masukan data untuk menambahkan Perangkat!"),e.qZA()(),e.TgZ(7,"form",5),e.NdJ("submit",function(){return t.submit()}),e.TgZ(8,"div",6)(9,"label",7),e._uU(10,"Model :"),e.qZA(),e.TgZ(11,"div",8),e._UZ(12,"input",9),e.qZA(),e.YNc(13,m,2,0,"span",10),e.qZA(),e.TgZ(14,"div",6)(15,"label",11),e._uU(16,"Alamat :"),e.qZA(),e.TgZ(17,"div",8),e._UZ(18,"input",12),e.qZA(),e.YNc(19,_,2,0,"span",10),e.qZA(),e.TgZ(20,"div",6)(21,"label",13),e._uU(22,"Kota :"),e.qZA(),e.TgZ(23,"div",8),e._UZ(24,"input",14),e.qZA(),e.YNc(25,y,2,0,"span",10),e.qZA(),e.TgZ(26,"div",6)(27,"label",15),e._uU(28,"Provinsi :"),e.qZA(),e.TgZ(29,"div",8),e._UZ(30,"input",16),e.qZA(),e.YNc(31,v,2,0,"span",10),e.qZA(),e.TgZ(32,"div",17)(33,"button",18),e.NdJ("click",function(){return t.back()}),e.TgZ(34,"div",19)(35,"span"),e._uU(36,"BATAL"),e.qZA()()(),e.TgZ(37,"button",20)(38,"div",19),e.YNc(39,f,1,0,"i",21),e.TgZ(40,"span"),e._uU(41),e.qZA()()()()()()()),2&n&&(e.xp6(7),e.Q6J("formGroup",t.form),e.xp6(4),e.Q6J("ngClass",null!=t.model&&t.model.touched&&null!=t.model&&t.model.invalid?"focus-within:border-red-500 border-red-500":"focus-within:border-blue-500 border-gray-400"),e.xp6(2),e.Q6J("ngIf",(null==t.model?null:t.model.touched)&&(null==t.model?null:t.model.invalid)),e.xp6(4),e.Q6J("ngClass",null!=t.address&&t.address.touched&&null!=t.address&&t.address.invalid?"focus-within:border-red-500 border-red-500":"focus-within:border-blue-500 border-gray-400"),e.xp6(2),e.Q6J("ngIf",(null==t.address?null:t.address.touched)&&(null==t.address?null:t.address.invalid)),e.xp6(4),e.Q6J("ngClass",null!=t.city&&t.city.touched&&null!=t.city&&t.city.invalid?"focus-within:border-red-500 border-red-500":"focus-within:border-blue-500 border-gray-400"),e.xp6(2),e.Q6J("ngIf",(null==t.city?null:t.city.touched)&&(null==t.city?null:t.city.invalid)),e.xp6(4),e.Q6J("ngClass",null!=t.province&&t.province.touched&&null!=t.province&&t.province.invalid?"focus-within:border-red-500 border-red-500":"focus-within:border-blue-500 border-gray-400"),e.xp6(2),e.Q6J("ngIf",(null==t.province?null:t.province.touched)&&(null==t.province?null:t.province.invalid)),e.xp6(8),e.Q6J("ngIf",t.status==t.rawStatus.loading),e.xp6(2),e.Oqu(t.status==t.rawStatus.loading?"Mengunggah..":"UBAH"))},dependencies:[p.ez,p.mk,p.O5,o.UX,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u]}),s})()},9564:(Z,c,l)=>{l.d(c,{g:()=>s});var e=l(5619);const o={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let a;const h=new Uint8Array(16);function g(){if(!a&&(a=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!a))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(h)}const r=[];for(let i=0;i<256;++i)r.push((i+256).toString(16).slice(1));const f=function v(i,n,t){if(o.randomUUID&&!n&&!i)return o.randomUUID();const d=(i=i||{}).random||(i.rng||g)();if(d[6]=15&d[6]|64,d[8]=63&d[8]|128,n){t=t||0;for(let u=0;u<16;++u)n[t+u]=d[u];return n}return function m(i,n=0){return(r[i[n+0]]+r[i[n+1]]+r[i[n+2]]+r[i[n+3]]+"-"+r[i[n+4]]+r[i[n+5]]+"-"+r[i[n+6]]+r[i[n+7]]+"-"+r[i[n+8]]+r[i[n+9]]+"-"+r[i[n+10]]+r[i[n+11]]+r[i[n+12]]+r[i[n+13]]+r[i[n+14]]+r[i[n+15]]).toLowerCase()}(d)};var b=l(6689);let s=(()=>{class i{constructor(){this.subject=new e.X([]),this.observable=this.subject.asObservable()}push(t){t.id=f();let d=this.subject.getValue();d.push(t),this.subject.next(d),setInterval(()=>this.delete(t.id),3e3)}delete(t){let u=this.subject.getValue().filter(U=>U.id!=t);this.subject.next(u)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=b.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()}}]);