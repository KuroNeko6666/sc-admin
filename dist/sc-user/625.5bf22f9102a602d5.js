"use strict";(self.webpackChunksc_user=self.webpackChunksc_user||[]).push([[625,564],{3625:(x,p,o)=>{o.r(p),o.d(p,{AdminUpdateComponent:()=>b});var e=o(6689),g=o(6814),u=o(95),s=o(6565),f=o(1520),_=o(9564),r=o(4670);function h(l,c){1&l&&(e.TgZ(0,"span",22),e._uU(1,"*nama dibutuhkan!"),e.qZA())}function v(l,c){if(1&l){const i=e.EpF();e.TgZ(0,"ul",23)(1,"li",24),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.changeRole("operator-user"))}),e.TgZ(2,"span"),e._uU(3,"operator-user"),e.qZA()(),e.TgZ(4,"li",24),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.changeRole("operator-device"))}),e.TgZ(5,"span"),e._uU(6,"operator-device"),e.qZA()()()}}function U(l,c){1&l&&e._UZ(0,"i",25)}let b=(()=>{class l{constructor(){this.router=(0,e.f3M)(r.F0),this.service=(0,e.f3M)(f.l),this.notif=(0,e.f3M)(_.g),this.fb=(0,e.f3M)(u.qu),this.active=(0,e.f3M)(r.gz),this.rawStatus=s.q,this.status=s.q.initial,this.currentID="",this.role="operator-user",this.drawer=!1,this.form=this.fb.group({name:["",[u.kI.required]]})}get name(){return this.form.get("name")}ngOnInit(){this.active.params.subscribe(i=>{this.find(i.id??"")})}drawerToggle(){this.drawer=!this.drawer}changeRole(i){this.role=i,this.drawerToggle()}find(i){this.status=s.q.loading,this.currentID=i,this.service.find(i).subscribe({next:t=>{this.setForm(t.data),this.status=s.q.initial},error:t=>{console.log(t),this.status=s.q.error}})}submit(){if(this.form.invalid)return this.form.markAllAsTouched();this.status=s.q.loading,this.service.edit(this.formData,this.currentID).subscribe({next:i=>{this.notif.push({message:"Data berhasil ditambahkan",status:"success"}),this.status=s.q.initial,this.back()},error:i=>{this.notif.push({message:"Data gagal ditambahkan",status:"failure"}),console.log(i),this.status=s.q.error}})}back(){this.router.navigateByUrl("/admin/list")}setForm(i){this.name?.setValue(i.name),this.role=i.role}get formData(){let i=new FormData;return i.set("name",this.name?.value??""),i.append("role",this.role),i}}return l.\u0275fac=function(i){return new(i||l)},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-admin-update"]],standalone:!0,features:[e.jDz],decls:34,vars:8,consts:[[1,"bg-white","rounded-lg","shadow","p-8"],[1,"flex","flex-col","gap-5"],[1,"flex","flex-col"],[1,"text-2xl","font-black"],[1,""],[1,"flex","flex-col","w-full","gap-3",3,"formGroup","submit"],[1,"flex","flex-col","focus-within:scale-[102%]","transition-all","duration-200"],["for","name",1,"mb-1"],[1,"flex","flex-row","place-items-center","border-[1px]","md:border-[2px]","2xl:border-[3px]","transition-all","duration-200","rounded-lg",3,"ngClass"],["type","text","placeholder","Masukan name","formControlName","name","id","name",1,"w-full"],["class","px-3 mt-1 text-red-500 text-sm",4,"ngIf"],[1,"flex","flex-col","focus-within:scale-[102%]","transition-all","duration-200","relative"],[1,"mb-1"],["type","button",1,"px-4","py-2","rounded-lg","border-[1px]","md:border-[2px]","2xl:border-[3px]","transition-all","duration-200",3,"ngClass","click"],[1,"flex","flex-row","justify-between"],[1,"fa-solid","fa-caret-down"],["class","absolute z-20 left-0 top-[110%] bg-white shadow rounded-lg py-2 w-full",4,"ngIf"],[1,"flex","flex-row","justify-end","gap-3"],["type","button",1,"px-4","py-2","mt-2","rounded-lg","bg-red-500","hover:bg-red-600","text-white","font-bold","hover:scale-[102%]","transition-all","duration-200",3,"click"],[1,"flex","flex-row","justify-center","place-items-center","gap-2"],["type","submit",1,"px-4","py-2","mt-2","rounded-lg","bg-blue-500","hover:bg-blue-600","text-white","font-bold","hover:scale-[102%]","transition-all","duration-200"],["class","fa-solid fa-spinner animate-spin",4,"ngIf"],[1,"px-3","mt-1","text-red-500","text-sm"],[1,"absolute","z-20","left-0","top-[110%]","bg-white","shadow","rounded-lg","py-2","w-full"],[1,"px-4","py-2","hover:bg-blue-200",3,"click"],[1,"fa-solid","fa-spinner","animate-spin"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e._uU(4,"Tambah Admin"),e.qZA(),e.TgZ(5,"span",4),e._uU(6,"Masukan data untuk menambahkan Admin!"),e.qZA()(),e.TgZ(7,"form",5),e.NdJ("submit",function(){return t.submit()}),e.TgZ(8,"div",6)(9,"label",7),e._uU(10,"Nama :"),e.qZA(),e.TgZ(11,"div",8),e._UZ(12,"input",9),e.qZA(),e.YNc(13,h,2,0,"span",10),e.qZA(),e.TgZ(14,"div",11)(15,"label",12),e._uU(16,"Role :"),e.qZA(),e.TgZ(17,"button",13),e.NdJ("click",function(){return t.drawerToggle()}),e.TgZ(18,"span",14)(19,"span"),e._uU(20),e.qZA(),e.TgZ(21,"span"),e._UZ(22,"i",15),e.qZA()()(),e.YNc(23,v,7,0,"ul",16),e.qZA(),e.TgZ(24,"div",17)(25,"button",18),e.NdJ("click",function(){return t.back()}),e.TgZ(26,"div",19)(27,"span"),e._uU(28,"BATAL"),e.qZA()()(),e.TgZ(29,"button",20)(30,"div",19),e.YNc(31,U,1,0,"i",21),e.TgZ(32,"span"),e._uU(33),e.qZA()()()()()()()),2&i&&(e.xp6(7),e.Q6J("formGroup",t.form),e.xp6(4),e.Q6J("ngClass",null!=t.name&&t.name.touched&&null!=t.name&&t.name.invalid?"focus-within:border-red-500 border-red-500":"focus-within:border-blue-500 border-gray-400"),e.xp6(2),e.Q6J("ngIf",(null==t.name?null:t.name.touched)&&(null==t.name?null:t.name.invalid)),e.xp6(4),e.Q6J("ngClass",t.drawer?"border-blue-500":"border-gray-400"),e.xp6(3),e.Oqu(t.role),e.xp6(3),e.Q6J("ngIf",t.drawer),e.xp6(8),e.Q6J("ngIf",t.status==t.rawStatus.loading),e.xp6(2),e.Oqu(t.status==t.rawStatus.loading?"Mengunggah..":"UPDATE"))},dependencies:[g.ez,g.mk,g.O5,u.UX,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u]}),l})()},9564:(x,p,o)=>{o.d(p,{g:()=>i});var e=o(5619);const u={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let s;const f=new Uint8Array(16);function _(){if(!s&&(s=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!s))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(f)}const r=[];for(let t=0;t<256;++t)r.push((t+256).toString(16).slice(1));const l=function b(t,n,a){if(u.randomUUID&&!n&&!t)return u.randomUUID();const d=(t=t||{}).random||(t.rng||_)();if(d[6]=15&d[6]|64,d[8]=63&d[8]|128,n){a=a||0;for(let m=0;m<16;++m)n[a+m]=d[m];return n}return function h(t,n=0){return(r[t[n+0]]+r[t[n+1]]+r[t[n+2]]+r[t[n+3]]+"-"+r[t[n+4]]+r[t[n+5]]+"-"+r[t[n+6]]+r[t[n+7]]+"-"+r[t[n+8]]+r[t[n+9]]+"-"+r[t[n+10]]+r[t[n+11]]+r[t[n+12]]+r[t[n+13]]+r[t[n+14]]+r[t[n+15]]).toLowerCase()}(d)};var c=o(6689);let i=(()=>{class t{constructor(){this.subject=new e.X([]),this.observable=this.subject.asObservable()}push(a){a.id=l();let d=this.subject.getValue();d.push(a),this.subject.next(d),setInterval(()=>this.delete(a.id),3e3)}delete(a){let m=this.subject.getValue().filter(T=>T.id!=a);this.subject.next(m)}}return t.\u0275fac=function(a){return new(a||t)},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);